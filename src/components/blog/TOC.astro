---
import type { Post } from "~/types";
import { Icon } from "astro-icon/components";
import { getEntry, render } from "astro:content";
interface Props {
    id:string;
}
const { id } = Astro.props;
const entry = await getEntry('post', id)
if (!entry) {
    throw new Error('Could not find blog post')
}
const {Content, headings, remarkPluginFrontmatter} = await render(entry);
const toc = headings.map((h,i) => {
    return {depth:h.depth, title:h.text, link:h.slug}
})
---
{headings[0] && (
    <h2>目次</h2>
<div tabindex="0" class="collapse collapse-plus bg-slate-50 dark:bg-gray-900 rounded-xl mx-auto">
    <div class="collapse-title">
        <p></p>
    </div>
    <input type="checkbox" checked={true} />
   
    <div class="collapse-content">
        <div class="border-s-4  border-indigo-200 dark:border-gray-100 mx-7 md:mx-12">
            {
                toc && (
                    toc.map((t, i)=>(
                    <div class="">
                        {!(t.title === 'Footnotes') && (
                            
                                (t.depth==2) ? (
                                    
                                    <div class="text-sm text-muted hover:underline hover:text-blue-400 flex gap-5 items-center -translate-x-3 my-7">
                                         
                                        <Icon name="tabler:brand-tinder-filled" class="text-indigo-400 size-5 bg-indigo-100 rounded-full p-1"/>
                                        <div class=""><a href={`#${t.link}`}>{t.title}</a></div>
                                        
                                    </div>
                                ):(
                                    <div class="ml-10 text-xs text-muted hover:text-blue-400 flex items-center mt-1 border-s-2 border-teal-200 py-2">
                                        
                                        <Icon name="tabler:brand-tinder-filled" class="text-teal-400 size-5 bg-teal-100 rounded-full p-1 -translate-x-3"/>
                                        <div class=""><a href={`#${t.link}`}>{t.title}</a></div>
                                    </div>
                                )
                        
                        )}
                        </div>
                    )
            ))}
        </div>
     </div>
</div>
) }
